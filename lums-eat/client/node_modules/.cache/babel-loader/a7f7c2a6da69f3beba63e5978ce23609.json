{"ast":null,"code":"import _classCallCheck from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import Modal from'react-bootstrap/Modal';import'./userfeedback.styles.scss';// import { Link } from 'react-router-dom';\nimport{connect}from\"react-redux\";import{logoutUser}from\"../../redux/actions/authActions\";var axios=require('axios');var UserFeedbackPage=/*#__PURE__*/function(_React$Component){_inherits(UserFeedbackPage,_React$Component);var _super=_createSuper(UserFeedbackPage);function UserFeedbackPage(){var _this;_classCallCheck(this,UserFeedbackPage);_this=_super.call(this);_this.handleSubmit=function(text){return function(event){event.preventDefault();var details={\"UserID\":text,\"ItemID\":_this.state.ItemID,\"OrderID\":_this.state.OrderID,\"RestaurantID\":_this.state.RestaurantID,\"Feedback\":_this.state.Feedback};axios.post('/feedback/add',details).then(function(res){return _this.setState({text2:'Feedback has been sent to restaurant!'});},_this.setState({popupshow:true})).catch(function(err){return _this.setState({text:'Error'});},_this.setState({text2:'Feedback already submitted for this order'}),_this.setState({popupshow:true}));};};_this.refresh=function(event){window.location.reload();};_this.state={UserID:'',ItemID:'',OrderID:'',RestaurantID:'',Feedback:'',popupshow:false,text:'Feedback Sent!',text2:'Feedback has been sent to restaurant!'};return _this;}_createClass(UserFeedbackPage,[{key:\"updateUserID\",value:function updateUserID(event){this.setState({UserID:event.target.value});}},{key:\"updateItemID\",value:function updateItemID(event){this.setState({ItemID:event.target.value});}},{key:\"updateOrderID\",value:function updateOrderID(event){this.setState({OrderID:event.target.value});}},{key:\"updateRestaurantID\",value:function updateRestaurantID(event){this.setState({RestaurantID:event.target.value});}},{key:\"updateFeedback\",value:function updateFeedback(event){this.setState({Feedback:event.target.value});}},{key:\"componentDidMount\",value:function componentDidMount(){var order=this.props.location.state.order;var restaurant=this.props.location.state.restaurant;var item=this.props.location.state.item;this.setState({RestaurantID:restaurant});this.setState({OrderID:order});this.setState({ItemID:item[0][0]});}},{key:\"renderIcon\",value:function renderIcon(){this.setState({UserID:'CHECK'});return/*#__PURE__*/React.createElement(\"div\",null,\"Function called\");}},{key:\"render\",value:function render(){var _this2=this;// const { user } = this.props.auth;\n// const { order } = this.props.location.state\n// const { restaurant } = this.props.location.state\n// const { item } = this.props.location.state\nreturn/*#__PURE__*/React.createElement(\"dic\",{className:\"restaurantpage\"},/*#__PURE__*/React.createElement(\"div\",{className:\"check\"},/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Submit Feedback\"),/*#__PURE__*/React.createElement(\"h1\",null,\"Restaurant: \",this.state.RestaurantID.toUpperCase()),/*#__PURE__*/React.createElement(\"h1\",null,\"Order ID: \",this.state.OrderID)),/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit(localStorage.name)},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"Feedback\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Feedback\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"name\",placeholder:\"Enter Feedback\",required:true,value:this.state.Feedback,onChange:this.updateFeedback.bind(this)})),/*#__PURE__*/React.createElement(Button,{variant:\"primary\",type:\"submit\",block:true},\"Submit\")),/*#__PURE__*/React.createElement(Modal,{show:this.state.popupshow},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true,onClick:function onClick(){return _this2.setState({popupshow:false});}},/*#__PURE__*/React.createElement(Modal.Title,null,\" \",this.state.text,\" \")),/*#__PURE__*/React.createElement(Modal.Body,null,\" \",this.state.text2,\" \"),/*#__PURE__*/React.createElement(Modal.Footer,null,/*#__PURE__*/React.createElement(Button,{variant:\"primary\",onClick:this.refresh},\"Ok\")))));}}]);return UserFeedbackPage;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps,{logoutUser:logoutUser})(UserFeedbackPage);// export default UserFeedbackPage;","map":{"version":3,"sources":["/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/src/pages/userfeedback/userfeedback.component.jsx"],"names":["React","Form","Button","Modal","connect","logoutUser","axios","require","UserFeedbackPage","handleSubmit","text","event","preventDefault","details","state","ItemID","OrderID","RestaurantID","Feedback","post","then","res","setState","text2","popupshow","catch","err","refresh","window","location","reload","UserID","target","value","order","props","restaurant","item","toUpperCase","localStorage","name","updateFeedback","bind","Component","mapStateToProps","auth"],"mappings":"gpBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,sBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,wBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAO,4BAAP,CAGA;AACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,UAAT,KAA2B,iCAA3B,CAEA,GAAMC,CAAAA,KAAK,CAAGC,OAAO,CAAC,OAAD,CAArB,C,GAEMC,CAAAA,gB,gIACJ,2BAAc,kDACZ,wBADY,MAqCdC,YArCc,CAqCC,SAACC,IAAD,QAAU,UAACC,KAAD,CAAW,CAClCA,KAAK,CAACC,cAAN,GACA,GAAIC,CAAAA,OAAO,CAAG,CACZ,SAAUH,IADE,CAEZ,SAAU,MAAKI,KAAL,CAAWC,MAFT,CAGb,UAAW,MAAKD,KAAL,CAAWE,OAHT,CAIb,eAAgB,MAAKF,KAAL,CAAWG,YAJd,CAKb,WAAY,MAAKH,KAAL,CAAWI,QALV,CAAd,CAOAZ,KAAK,CAACa,IAAN,CAAW,eAAX,CAA4BN,OAA5B,EACGO,IADH,CACQ,SAACC,GAAD,QAAS,OAAKC,QAAL,CAAc,CAACC,KAAK,CAAE,uCAAR,CAAd,CAAT,EADR,CACkF,MAAKD,QAAL,CAAc,CAACE,SAAS,CAAE,IAAZ,CAAd,CADlF,EAEGC,KAFH,CAES,SAAAC,GAAG,QAAI,OAAKJ,QAAL,CAAc,CAACZ,IAAI,CAAE,OAAP,CAAd,CAAJ,EAFZ,CAEgD,MAAKY,QAAL,CAAc,CAACC,KAAK,CAAE,2CAAR,CAAd,CAFhD,CAEqH,MAAKD,QAAL,CAAc,CAACE,SAAS,CAAE,IAAZ,CAAd,CAFrH,EAGD,CAZc,EArCD,OAmDdG,OAnDc,CAmDJ,SAAChB,KAAD,CAAW,CACnBiB,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CArDa,CAGV,MAAKhB,KAAL,CAAW,CACTiB,MAAM,CAAE,EADC,CAEThB,MAAM,CAAE,EAFC,CAGTC,OAAO,CAAE,EAHA,CAITC,YAAY,CAAE,EAJL,CAKTC,QAAQ,CAAE,EALD,CAOTM,SAAS,CAAE,KAPF,CAQTd,IAAI,CAAE,gBARG,CASTa,KAAK,CAAE,uCATE,CAAX,CAHU,aAeb,C,+EAEYZ,K,CAAO,CAClB,KAAKW,QAAL,CAAc,CAACS,MAAM,CAAEpB,KAAK,CAACqB,MAAN,CAAaC,KAAtB,CAAd,EACD,C,kDAEYtB,K,CAAO,CAClB,KAAKW,QAAL,CAAc,CAACP,MAAM,CAAEJ,KAAK,CAACqB,MAAN,CAAaC,KAAtB,CAAd,EACD,C,oDAEatB,K,CAAO,CACnB,KAAKW,QAAL,CAAc,CAACN,OAAO,CAAEL,KAAK,CAACqB,MAAN,CAAaC,KAAvB,CAAd,EACD,C,8DAEkBtB,K,CAAO,CACxB,KAAKW,QAAL,CAAc,CAACL,YAAY,CAAEN,KAAK,CAACqB,MAAN,CAAaC,KAA5B,CAAd,EACD,C,sDAEctB,K,CAAO,CACpB,KAAKW,QAAL,CAAc,CAACJ,QAAQ,CAAEP,KAAK,CAACqB,MAAN,CAAaC,KAAxB,CAAd,EACD,C,6DAqBC,IACUC,CAAAA,KADV,CACoB,KAAKC,KAAL,CAAWN,QAAX,CAAoBf,KADxC,CACUoB,KADV,IAEUE,CAAAA,UAFV,CAEyB,KAAKD,KAAL,CAAWN,QAAX,CAAoBf,KAF7C,CAEUsB,UAFV,IAGUC,CAAAA,IAHV,CAGmB,KAAKF,KAAL,CAAWN,QAAX,CAAoBf,KAHvC,CAGUuB,IAHV,CAKE,KAAKf,QAAL,CAAc,CAACL,YAAY,CAAEmB,UAAf,CAAd,EACA,KAAKd,QAAL,CAAc,CAACN,OAAO,CAAEkB,KAAV,CAAd,EACA,KAAKZ,QAAL,CAAc,CAACP,MAAM,CAAEsB,IAAI,CAAC,CAAD,CAAJ,CAAQ,CAAR,CAAT,CAAd,EACD,C,+CAES,CACV,KAAKf,QAAL,CAAc,CAACS,MAAM,CAAE,OAAT,CAAd,EACA,mBACE,iDADF,CAGD,C,uCAEQ,iBACP;AACA;AACA;AACA;AACA,mBACE,2BAAK,SAAS,CAAG,gBAAjB,eACE,2BAAK,SAAS,CAAG,OAAjB,eACE,2BAAK,SAAS,CAAG,QAAjB,eACE,gDADF,cAEE,6CAAiB,KAAKjB,KAAL,CAAWG,YAAX,CAAwBqB,WAAxB,EAAjB,CAFF,cAGE,2CAAe,KAAKxB,KAAL,CAAWE,OAA1B,CAHF,CADF,cAQE,oBAAC,IAAD,EAAM,QAAQ,CAAI,KAAKP,YAAL,CAAkB8B,YAAY,CAACC,IAA/B,CAAlB,eACI,oBAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,eACI,oBAAC,IAAD,CAAM,KAAN,iBADJ,cAEI,oBAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,MAAnB,CACc,WAAW,CAAC,gBAD1B,CAEc,QAAQ,KAFtB,CAGc,KAAK,CAAG,KAAK1B,KAAL,CAAWI,QAHjC,CAIc,QAAQ,CAAI,KAAKuB,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAJ1B,EAFJ,CADJ,cAUI,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,KAAK,KAA7C,WAVJ,CARF,cAsBE,oBAAC,KAAD,EAAO,IAAI,CAAE,KAAK5B,KAAL,CAAWU,SAAxB,eACE,oBAAC,KAAD,CAAO,MAAP,EAAc,WAAW,KAAzB,CAA0B,OAAO,CAAE,yBAAK,CAAA,MAAI,CAACF,QAAL,CAAc,CAACE,SAAS,CAAE,KAAZ,CAAd,CAAL,EAAnC,eACE,oBAAC,KAAD,CAAO,KAAP,UAAe,KAAKV,KAAL,CAAWJ,IAA1B,KADF,CADF,cAIE,oBAAC,KAAD,CAAO,IAAP,UAAc,KAAKI,KAAL,CAAWS,KAAzB,KAJF,cAKE,oBAAC,KAAD,CAAO,MAAP,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAE,KAAKI,OAAxC,OADF,CALF,CAtBF,CADF,CADF,CAsCD,C,8BArH4B3B,KAAK,CAAC2C,S,EA4HrC,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAA9B,KAAK,QAAK,CAChC+B,IAAI,CAAE/B,KAAK,CAAC+B,IADoB,CAAL,EAA7B,CAIA,cAAezC,CAAAA,OAAO,CACpBwC,eADoB,CAEpB,CAAEvC,UAAU,CAAVA,UAAF,CAFoB,CAAP,CAGbG,gBAHa,CAAf,CAKA","sourcesContent":["import React from 'react';\nimport Form from 'react-bootstrap/Form'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport './userfeedback.styles.scss';\n\nimport PropTypes from \"prop-types\";\n// import { Link } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../redux/actions/authActions\";\n\nconst axios = require('axios')\n\nclass UserFeedbackPage extends React.Component {\n  constructor() {\n    super();\n    \n      this.state={\n        UserID: '',\n        ItemID: '',\n        OrderID: '',\n        RestaurantID: '',\n        Feedback: '',\n\n        popupshow: false,\n        text: 'Feedback Sent!',\n        text2: 'Feedback has been sent to restaurant!'\n\n      }  \n  }\n\n  updateUserID(event) {\n    this.setState({UserID: event.target.value})\n  }\n\n  updateItemID(event) {\n    this.setState({ItemID: event.target.value})\n  }\n\n  updateOrderID(event) {\n    this.setState({OrderID: event.target.value})\n  }\n\n  updateRestaurantID(event) {\n    this.setState({RestaurantID: event.target.value})\n  }\n\n  updateFeedback(event) {\n    this.setState({Feedback: event.target.value})\n  }\n\n  handleSubmit = (text) => (event) => {\n    event.preventDefault();\n    let details = {\n      \"UserID\": text,\n      \"ItemID\": this.state.ItemID,\n\t    \"OrderID\": this.state.OrderID,\n\t    \"RestaurantID\": this.state.RestaurantID,\n\t    \"Feedback\": this.state.Feedback\n      }\n    axios.post('/feedback/add', details)\n      .then((res) => this.setState({text2: 'Feedback has been sent to restaurant!'}), this.setState({popupshow: true}))\n      .catch(err => this.setState({text: 'Error'}), this.setState({text2: 'Feedback already submitted for this order'}), this.setState({popupshow: true}))\n  }\n\n  refresh = (event) => {\n    window.location.reload();\n  }\n\n  componentDidMount( )\n    {\n      const { order } = this.props.location.state\n      const { restaurant } = this.props.location.state\n      const { item } = this.props.location.state\n      \n      this.setState({RestaurantID: restaurant})\n      this.setState({OrderID: order})\n      this.setState({ItemID: item[0][0]})\n    }\n\n  renderIcon(){\n    this.setState({UserID: 'CHECK'})\n    return(\n      <div>Function called</div>\n    )\n  }\n\n  render() {\n    // const { user } = this.props.auth;\n    // const { order } = this.props.location.state\n    // const { restaurant } = this.props.location.state\n    // const { item } = this.props.location.state\n    return (\n      <dic className = 'restaurantpage'>\n        <div className = 'check'>\n          <div className = 'center'>\n            <h1>Submit Feedback</h1>\n            <h1>Restaurant: {this.state.RestaurantID.toUpperCase()}</h1>\n            <h1>Order ID: {this.state.OrderID}</h1>\n          </div>\n\n          \n          <Form onSubmit = {this.handleSubmit(localStorage.name)}>\n              <Form.Group controlId=\"Feedback\">\n                  <Form.Label>Feedback</Form.Label>\n                  <Form.Control type=\"name\"\n                                placeholder=\"Enter Feedback\"\n                                required\n                                value ={this.state.Feedback}\n                                onChange = {this.updateFeedback.bind(this)} />\n              </Form.Group>\n\n              <Button variant=\"primary\" type=\"submit\" block>\n                  Submit\n              </Button>\n          </Form>\n          <Modal show={this.state.popupshow}>\n            <Modal.Header closeButton onClick={()=> this.setState({popupshow: false})}>\n              <Modal.Title> {this.state.text} </Modal.Title>\n            </Modal.Header>\n            <Modal.Body> {this.state.text2} </Modal.Body>\n            <Modal.Footer>\n              <Button variant=\"primary\" onClick={this.refresh}>\n                Ok\n              </Button>\n            </Modal.Footer>\n          </Modal>\n        </div>\n      </dic>\n    );\n  }\n}\n\nUserFeedbackPage.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(\n  mapStateToProps,\n  { logoutUser }\n)(UserFeedbackPage);\n\n// export default UserFeedbackPage;"]},"metadata":{},"sourceType":"module"}