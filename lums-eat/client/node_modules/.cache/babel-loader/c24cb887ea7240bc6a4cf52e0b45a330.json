{"ast":null,"code":"import _classCallCheck from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';// import { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport{Switch,Route}from'react-router-dom';import{connect}from'react-redux';import{createStructuredSelector}from'reselect';import'bootstrap/dist/css/bootstrap.min.css';import jwt_decode from\"jwt-decode\";import setAuthToken from\"./redux/utils/setAuthToken\";import{setCurrentUser as _setCurrentUser,logoutUser}from\"./redux/actions/authActions\";import store from'./redux/store.js';import'./App.css';import HomePage from'./pages/homepage/homepage.component';import RestaurantPage from'./pages/restaurantpage/restaurantpage.component';import OrdersPage from'./pages/orderspage/orderspage.component';import AnalyticsPage from'./pages/analyticspage/analyticspage.component';import ShopPage from'./pages/shop/shop.component';import MenuUpdate from'./pages/menu-update/menu-update.component';import SignInAndSignUpPage from'./pages/sign-in-and-sign-up/sign-in-and-sign-up.component';import Header from'./components/header/header.component';import CheckoutPage from'./pages/checkout/checkout.component.jsx';import{selectCurrentUser}from'./redux/user/user.selectors';import FeedbacksPage from'./pages/feedbackpage/feedbackpage.component';import UserFeedback from'./pages/userfeedback/userfeedback.component';import AddMenu from'./pages/add-menu/add-menu.component';import Authentication from'./pages/authentication/authentication.component';import Login from'./pages/login/Login';import Register from'./pages/register/Register';import Dashboard from'./pages/Dashboard/Dashboard';import PrivateRoute from\"./components/private-route/PrivateRoute\";console.log(localStorage);// Check for token to keep user logged in\nif(localStorage.jwtToken){// Set auth token header auth\nvar token=localStorage.jwtToken;setAuthToken(token);// Decode token and get user info and exp\nvar decoded=jwt_decode(token);// Set user and isAuthenticated\nstore.dispatch(_setCurrentUser(decoded));// Check for expired token\nvar currentTime=Date.now()/1000;// to get in milliseconds\nif(decoded.exp<currentTime){// Logout user\nstore.dispatch(logoutUser());// Redirect to login\nwindow.location.href=\"./login\";}}var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unsubscribeFromAuth=null;return _this;}_createClass(App,[{key:\"render\",// componentDidMount() {  \n// }\n// componentWillUnmount() {\n//   this.unsubscribeFromAuth();\n// }\nvalue:function render(){return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Header,null),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\",component:HomePage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\",component:CheckoutPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/restaurant\",component:RestaurantPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/analytics\",component:AnalyticsPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/orders\",component:OrdersPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/menu-update\",component:MenuUpdate}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/feedback\",component:FeedbacksPage}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/userfeedback\",component:UserFeedback}),/*#__PURE__*/React.createElement(Route,{path:\"/shop\",component:ShopPage}),/*#__PURE__*/React.createElement(Route,{path:\"/signin\",component:SignInAndSignUpPage}),/*#__PURE__*/React.createElement(Route,{path:\"/add-menu\",component:AddMenu}),/*#__PURE__*/React.createElement(Route,{path:\"/auth\",component:Authentication}),/*#__PURE__*/React.createElement(Route,{path:\"/login\",component:Login}),/*#__PURE__*/React.createElement(Route,{path:\"/register\",component:Register}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(PrivateRoute,{exact:true,path:\"/dashboard\",component:Dashboard}))));}}]);return App;}(React.Component);var mapStateToProps=createStructuredSelector({currentUser:selectCurrentUser});var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setCurrentUser:function setCurrentUser(user){return dispatch(_setCurrentUser(user));}};};export default connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/src/App.js"],"names":["React","Switch","Route","connect","createStructuredSelector","jwt_decode","setAuthToken","setCurrentUser","logoutUser","store","HomePage","RestaurantPage","OrdersPage","AnalyticsPage","ShopPage","MenuUpdate","SignInAndSignUpPage","Header","CheckoutPage","selectCurrentUser","FeedbacksPage","UserFeedback","AddMenu","Authentication","Login","Register","Dashboard","PrivateRoute","console","log","localStorage","jwtToken","token","decoded","dispatch","currentTime","Date","now","exp","window","location","href","App","unsubscribeFromAuth","Component","mapStateToProps","currentUser","mapDispatchToProps","user"],"mappings":"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","sourcesContent":["import React from 'react';\n// import { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { Switch, Route} from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport {createStructuredSelector} from 'reselect';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"./redux/utils/setAuthToken\";\nimport { setCurrentUser, logoutUser } from \"./redux/actions/authActions\";\nimport store from './redux/store.js';\n\nimport './App.css';\n\nimport HomePage from './pages/homepage/homepage.component';\nimport RestaurantPage from './pages/restaurantpage/restaurantpage.component';\nimport OrdersPage from './pages/orderspage/orderspage.component';\nimport AnalyticsPage from './pages/analyticspage/analyticspage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport MenuUpdate from './pages/menu-update/menu-update.component';\nimport SignInAndSignUpPage from './pages/sign-in-and-sign-up/sign-in-and-sign-up.component';\nimport Header from './components/header/header.component';\nimport CheckoutPage from './pages/checkout/checkout.component.jsx';\nimport {selectCurrentUser} from './redux/user/user.selectors';\nimport FeedbacksPage from './pages/feedbackpage/feedbackpage.component';\nimport UserFeedback from './pages/userfeedback/userfeedback.component';\nimport AddMenu from './pages/add-menu/add-menu.component';\nimport Authentication from './pages/authentication/authentication.component';\nimport Login from './pages/login/Login';\nimport Register from './pages/register/Register';\nimport Dashboard from './pages/Dashboard/Dashboard';\nimport PrivateRoute from \"./components/private-route/PrivateRoute\";\n\nconsole.log(localStorage)\n// Check for token to keep user logged in\nif (localStorage.jwtToken) {\n  // Set auth token header auth\n  const token = localStorage.jwtToken;\n  setAuthToken(token);\n  // Decode token and get user info and exp\n  const decoded = jwt_decode(token);\n  // Set user and isAuthenticated\n  store.dispatch(setCurrentUser(decoded));\n// Check for expired token\n  const currentTime = Date.now() / 1000; // to get in milliseconds\n  if (decoded.exp < currentTime) {\n    // Logout user\n    store.dispatch(logoutUser());\n    // Redirect to login\n    window.location.href = \"./login\";\n  }\n}\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  // componentDidMount() {  \n\n  // }\n\n  // componentWillUnmount() {\n  //   this.unsubscribeFromAuth();\n  // }\n\n  render() {\n    return (\n      <Switch>\n      <div>\n          <Header/>\n          <Route exact path='/' component={HomePage} />\n          <Route exact path = '/checkout' component={CheckoutPage} />\n          <Route exact path = '/restaurant' component={RestaurantPage} />\n          <Route exact path = '/analytics' component={AnalyticsPage} />\n          <Route exact path = '/orders' component={OrdersPage} />\n          <Route exact path = '/menu-update' component={MenuUpdate} />\n          <Route exact path = '/feedback' component={FeedbacksPage} />\n          <Route exact path = '/userfeedback' component={UserFeedback} />\n          <Route path='/shop' component={ShopPage} />\n          <Route path='/signin' component={SignInAndSignUpPage} />\n          <Route path='/add-menu' component={AddMenu} />\n          <Route path='/auth' component={Authentication} />\n          <Route path='/login' component={Login} />\n          <Route path='/register' component={Register} />\n          <Switch>\n              <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\n          </Switch>\n      </div>\n      </Switch>\n    );\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);"]},"metadata":{},"sourceType":"module"}