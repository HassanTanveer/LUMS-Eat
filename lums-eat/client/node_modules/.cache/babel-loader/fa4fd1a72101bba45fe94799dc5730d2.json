{"ast":null,"code":"import _classCallCheck from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link}from'react-router-dom';import Table from'react-bootstrap/Table';import'./totalanalyticsview.styles.scss';var AnalyticsView=/*#__PURE__*/function(_React$Component){_inherits(AnalyticsView,_React$Component);var _super=_createSuper(AnalyticsView);function AnalyticsView(){var _this;_classCallCheck(this,AnalyticsView);_this=_super.call(this);_this.totalPrice=function(){var total=0;for(var i=0;i<_this.state.sections.length;i++){var order=_this.state.sections[i];total=total+order.totalPrice;}return total;};_this.findHighest=function(){var most=[];// create an empty array\nfor(var i=0;i<_this.state.sections.length;i++){var check=_this.state.sections[i];if(check){var check2=check.items;}for(var j=0;j<check2.length;j++){var found=0;var check3=check2[j];for(var c=0;c<most.length;c++){if(most[c].key===check3[0]){most[c].value=most[c].value+parseInt(check3[1]);found=1;}}if(found===0){most.push({key:check3[0],value:parseInt(check3[1])});}}}var highindex=0;var highest=0;for(var _i=0;_i<most.length;_i++){if(most[_i].value>highest){highest=most[_i].value;highindex=_i;}}var final=most[highindex];if(final){var mostordered=final.key;}return mostordered;};_this.state={sections:[]};return _this;}_createClass(AnalyticsView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// const date = this.getCurrentDate();\nfetch(\"/orders/complete/\".concat(localStorage.RestaurantID)).then(function(res){return res.json();}).then(function(sections){return _this2.setState({sections:sections});});}// countTotal = () => {\n//   let total = 0\n//   for (let i = 0; i < this.state.sections.length; i++) {\n//     total = total + 1;\n//   }\n//   return total\n// }\n},{key:\"render\",// getCurrentDate(separator='-'){\n//   let newDate = new Date()\n//   let date = newDate.getDate();\n//   let month = newDate.getMonth() + 1;\n//   let year = newDate.getFullYear();\n//   return `${year}${separator}${month<10?`0${month}`:`${month}`}${separator}${date}`\n// }\nvalue:function render(){// const total = this.countTotal();\nvar revenue=this.totalPrice();var most=this.findHighest();// const date = this.getCurrentDate();\nreturn/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"restaurant-menu\"},/*#__PURE__*/React.createElement(\"div\",{className:\"top\"},/*#__PURE__*/React.createElement(Link,{className:\"top\",to:\"/analytics\"},\"TODAY\"),/*#__PURE__*/React.createElement(Link,{className:\"top\",to:\"/analytics/month\"},\"MONTH\"),/*#__PURE__*/React.createElement(Link,{className:\"top\",to:\"/analytics/year\"},\"YEAR\"),/*#__PURE__*/React.createElement(Link,{className:\"top\",to:\"/analytics/total\"},\"TOTAL\")),/*#__PURE__*/React.createElement(Table,{responsive:true},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"font\"},/*#__PURE__*/React.createElement(\"th\",null,\"Number of orders\"),/*#__PURE__*/React.createElement(\"th\",null,\"Most ordered item\"),/*#__PURE__*/React.createElement(\"th\",null,\"Revenue\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"font\"},this.state.sections.length),/*#__PURE__*/React.createElement(\"td\",{className:\"font\"},most),/*#__PURE__*/React.createElement(\"td\",{className:\"font\"},revenue,\" PKR\")))));}}]);return AnalyticsView;}(React.Component);export default AnalyticsView;","map":{"version":3,"sources":["/home/hassan/Desktop/NEW/LUMS-Eat/lums-eat/client/src/components/totalanalyticsview/totalanalyticsview.component.jsx"],"names":["React","Link","Table","AnalyticsView","totalPrice","total","i","state","sections","length","order","findHighest","most","check","check2","items","j","found","check3","c","key","value","parseInt","push","highindex","highest","final","mostordered","fetch","localStorage","RestaurantID","then","res","json","setState","revenue","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport Table from 'react-bootstrap/Table';\n\nimport './totalanalyticsview.styles.scss';\n\nclass AnalyticsView extends React.Component {\n  constructor() {\n    super();\n\n      this.state={\n      sections: [],\n      }\n    \n  }\n\n  componentDidMount(){\n    // const date = this.getCurrentDate();\n    fetch(`/orders/complete/${localStorage.RestaurantID}`)\n    .then(res=> res.json())\n    .then(sections => this.setState({sections}))\n  }\n\n  // countTotal = () => {\n  //   let total = 0\n\n  //   for (let i = 0; i < this.state.sections.length; i++) {\n  //     total = total + 1;\n  //   }\n\n  //   return total\n  // }\n\n  totalPrice = () => {\n    let total = 0\n    for (let i = 0; i < this.state.sections.length; i++) {\n      var order = this.state.sections[i];\n      total = total + order.totalPrice;\n    }\n    return total\n  }\n\n  findHighest = () => {\n    var most = []; // create an empty array\n\n    for (let i = 0; i < this.state.sections.length; i++)\n    {\n      var check = this.state.sections[i];\n\n      if(check)\n      {\n        var check2 = check.items;\n      }\n\n      for (let j = 0; j < check2.length; j++)\n      {\n        var found = 0;\n        var check3 = check2[j];\n\n        for (let c = 0; c < most.length; c++)\n        {\n          if(most[c].key === check3[0])\n          {\n            most[c].value = most[c].value + parseInt(check3[1]);\n            found = 1;\n          }\n        }\n\n        if(found === 0)\n        {\n          most.push({\n            key:   check3[0],\n            value: parseInt(check3[1])\n          });\n        }\n      }\n    }\n\n    var highindex = 0;\n    var highest = 0;\n    for (let i = 0; i < most.length; i++) {\n      if (most[i].value > highest){\n        highest = most[i].value;\n        highindex = i;\n      }\n    }\n    var final = most[highindex];\n\n    if(final)\n    {\n      var mostordered = final.key;\n    }\n\n    return mostordered\n  }\n\n  // getCurrentDate(separator='-'){\n\n  //   let newDate = new Date()\n  //   let date = newDate.getDate();\n  //   let month = newDate.getMonth() + 1;\n  //   let year = newDate.getFullYear();\n    \n  //   return `${year}${separator}${month<10?`0${month}`:`${month}`}${separator}${date}`\n  // }\n\n  render() {\n\n    // const total = this.countTotal();\n    const revenue = this.totalPrice();\n    const most = this.findHighest();\n    // const date = this.getCurrentDate();\n\n    return (\n      <div>\n        <div className='restaurant-menu'>\n          <div className=\"top\">\n            <Link className='top' to='/analytics'>\n              TODAY\n            </Link>\n            <Link className='top' to='/analytics/month'>\n              MONTH\n            </Link>\n            <Link className='top' to='/analytics/year'>\n              YEAR\n            </Link>\n            <Link className='top' to='/analytics/total'>\n              TOTAL\n            </Link>\n          </div>\n          <Table responsive>\n            <thead>\n              <tr className = 'font'>\n                <th>Number of orders</th>\n                <th>Most ordered item</th>\n                <th>Revenue</th>\n                {/* <th>Start Date</th> */}\n                {/* <th>Date</th> */}\n              </tr>\n            </thead>\n            <tbody>\n              <td className = 'font'>{this.state.sections.length}</td>\n              <td className = 'font'>{most}</td>\n              <td className = 'font'>{revenue} PKR</td>\n              {/* <td className = 'font'>2020-05-1</td> */}\n              {/* <td className = 'font'>{date}</td> */}\n            </tbody>\n          </Table>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default AnalyticsView;\n"]},"metadata":{},"sourceType":"module"}